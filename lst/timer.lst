C51 COMPILER V9.00   TIMER                                                                 06/15/2019 19:35:37 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE TIMER
OBJECT MODULE PLACED IN ..\bin\timer.obj
COMPILER INVOKED BY: C:\Program Files\Keil4\C51\BIN\C51.EXE ..\src\drv\timer.c LARGE BROWSE DEBUG OBJECTEXTEND PRINT(..\
                    -lst\timer.lst) OBJECT(..\bin\timer.obj)

line level    source

   1          #include "timer.h"
   2          
   3          static void timer7Init(void)
   4          {
   5   1          /* 10ms @ 24Mhz */
   6   1              T4T3M &= 0x0F;          // Fosc / 12T, timer output disable
   7   1              T4L = 0xE0;                     // set initial lower byte value for timer
   8   1              T4H = 0xB1;                     // set initial higher byte value for timer 
   9   1      }
  10          
  11          static void timer0Init(void)
  12          {
  13   1          /* 1ms @ 24Mhz */
  14   1              AUXR |= 0x80;   // 定时器时钟1T模式
  15   1              TMOD &= 0xF0;   // 设置定时器模式
  16   1              TL0 = 0x40;             // 设置定时初值
  17   1              TH0 = 0xA2;             // 设置定时初值
  18   1              TF0 = 0;                // 清除TF0标志
  19   1              TR0 = 1;                // 定时器0开始计时
  20   1          ET0 = 1;        // enable interupt
  21   1      }
  22          
  23          void timer10ms_Enable(void)
  24          {
  25   1              T4T3M |= 0x80;          /* timer 4 start counting */ 
  26   1              IE2 |= ET4;            /*  */ 
  27   1      }
  28          
  29          void timer10ms_Disable(void)
  30          {
  31   1              T4T3M &= 0x7F;          /* timer 4 stop counting */ 
  32   1              IE2 &= ~ET4;
  33   1      }
  34          
  35          void timer1ms_Enable(void)
  36          {
  37   1              T4T3M |= 0x80;          /* timer 0 start counting */ 
  38   1              IE2 |= ET4;            /*  */ 
  39   1      }
  40          
  41          void timer1ms_Disable(void)
  42          {
  43   1              T4T3M &= 0x7F;          /* timer 0 stop counting */ 
  44   1              IE2 &= ~ET4;
  45   1      }
  46          
  47          void timerInit()
  48          {
  49   1          timer7Init();
  50   1          timer0Init();
  51   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
C51 COMPILER V9.00   TIMER                                                                 06/15/2019 19:35:37 PAGE 2   

   CODE SIZE        =     63    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
